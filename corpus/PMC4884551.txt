LICENSE: This file is available for text mining. It may also be used consistent with the principles of fair use under the copyright law.


   79055585306J Neurosci MethodsJ. Neurosci. MethodsJournal of neuroscience methods0165-02701872-678X27060385488455110.1016/j.jneumeth.2016.04.003NIHMS781404ArticleFeeding Experimentation Device (FED): A flexible open-source device for measuring feeding behavior Nguyen Katrina P. 1katrina.nguyen@nih.govO’Neal Timothy J. 1timothy.o’neal@nih.govBolonduro Olurotimi A. 1obolonduro@gmail.comWhite Elecia 2elecia@logicalelegance.comKravitz Alexxai V. 1alexxai.kravitz@nih.gov1 Diabetes, Endocrinology, and Obesity Branch, National Institute of Diabetes and Digestive and Kidney Diseases, National Institutes of Health, Building 10-CRC, Room 5-5932, Bethesda, MD 20892, USA2 Logical Elegance, San Jose, CA 95130, USACorrespondence: Alexxai V. Kravitz, PhD, National Institutes of Health, NIDDK, NIDA, Building 10-CRC, Room 5-5932, 10 Center Drive, Bethesda, MD 20814, Phone: 301-496-68965 5 2016 06 4 2016 15 7 2016 15 7 2017 267 108 114 This file is available for text mining. It may also be used consistent with the principles of fair use under the copyright law.Background
Measuring food intake in rodents is a conceptually simple yet labor-intensive and temporally-imprecise task. Most commonly, food is weighed manually, with an interval of hours or days between measurements. Commercial feeding monitors are excellent, but are costly and require specialized caging and equipment.

New method
We have developed the Feeding Experimentation Device (FED): a low-cost, open-source, home cage-compatible feeding system. FED utilizes an Arduino microcontroller and open-source software and hardware. FED dispenses a single food pellet into a food well where it is monitored by an infrared beam. When the mouse removes the pellet, FED logs the timestamp to a secure digital (SD) card and dispenses a new pellet into the well. Post-hoc analyses of pellet retrieval timestamps reveal high-resolution details about feeding behavior.

Results
FED is capable of accurately measuring food intake, identifying discrete trends during light and dark-cycle feeding. Additionally, we show the utility of FED for measuring increases in feeding resulting from optogenetic stimulation of agouti-related peptide neurons in the arcuate nucleus of the hypothalamus.

Comparison to existing methods
With a cost of ~$350 per device, FED is &gt;10x cheaper than commercially available feeding systems. FED is also self-contained, battery powered, and designed to be placed in standard colony rack cages, allowing for monitoring of true home cage feeding behavior. Moreover, FED is highly adaptable and can be synchronized with emerging techniques in neuroscience, such as optogenetics, as we demonstrate here.

Conclusions
FED allows for accurate, precise monitoring of feeding behavior in a home cage setting.

Graphical abstract



Arduinofeeding behaviorfood intakeopen-source
   1. Introduction
Food intake measurements are important in many research labs, particularly those that examine obesity and digestive diseases. While conceptually simple, obtaining accurate measurements of food intake in mice is not trivial (Ellacott et al., 2010). Often, food is manually weighed every few days; while extremely prevalent, this method is time-consuming and produces data with poor temporal resolution (Ulman et al., 2008). Several commercial systems are available for automatically measuring food intake. While these systems are excellent, they are expensive and rely on specialized caging and equipment (Table 1). To complement these commercial systems, we developed the Feeding Experimentation Device (FED): a home cage-compatible feeding system that measures food intake with high accuracy and precision.

When designing FED, we prioritized using “off-the-shelf” and open-source parts to facilitate accessibility for other labs. FED is controlled by an Arduino microcontroller and uses a custom-designed 3D housing to store and dispense food pellets (20 or 45 mg). When active, the device releases a single pellet into a retrieval well, where its presence is monitored by an infrared beam. Upon pellet retrieval, FED timestamps the event to a secure digital (SD) card and dispenses a new pellet into the well. Feeding data is stored in individual comma-separated value (CSV) files that can be analyzed by the user. FED is powered with a 6600 mAh rechargeable Li-ion battery, allowing for ~7 days of continuous operation. Including 3D printer filament, a single FED can be built for ~$350. Importantly, FED fits within rodent colony rack caging, allowing monitoring of feeding behavior in a home environment without any specialized caging or additional equipment (Video 1).

Here, we explain the design and construction of FED, describe validation tests of its accuracy and function, and outline two experiments performed to demonstrate the utility of FED: 1) A 72-hour home cage feeding experiment to examine light-cycle and dark-cycle feeding patterns; and 2) an optogenetic experiment utilizing stimulation of agouti-related peptide (AgRP) expressing neurons in the arcuate nucleus of the hypothalamus to artificially evoke feeding.

2. Methods
2.1 Hardware
FED’s housing was designed using 3D computer aided design software (Autodesk Inventor, Mill Valley, CA) and printed using non-toxic polylactic acid (PLA) filament (Adafruit Industries, New York, NY) via a FlashForge Dreamer Dual Extrusion 3D printer (FlashForge USA, Los Angeles, CA) (Fig. 1A). All 3D-printed components can be cleaned with standard laboratory cleaning supplies or can be autoclaved up to 150°C. The base (105 × 140 × 77 mm) houses the entire FED system, including electronics, stepper motor, food silo, and a rechargeable battery. The food silo, with a capacity of 22 g (~1100 20 mg pellets or ~500 45 mg pellets), sits atop a rotating disc, designed with 8 holes (Ø4 mm each, spaced 45° apart), each of which holds a single 20 mg pellet; the rotating disc can also be easily swapped out to dispense 45 mg pellets. The rotating disc sits atop the motor mount with a single hole (Ø6 mm) which dispenses a single pellet into the food well following activation of the stepper motor. Dispensed pellets are guided down a pellet shoot into the food well (15 × 16 × 19 mm), which holds pellets between the emitter and detector of an infrared photo-interrupter (SparkFun Electronics, Niwot, CO) where they are monitored until retrieved. The timestamp and current pellet count are automatically logged to an SD card following pellet retrieval, with a delay ≤ 500 ms.

2.2 Electronics
The circuitry of FED contains 6 key components (Fig. 1B): an Arduino Pro board (SparkFun Electronics), a data logging shield (Adafruit Industries), a motor shield (Adafruit Industries), a small reduction stepper motor (Adafruit Industries), a transmissive photo interrupter board (Karlsson Robotics, Tequesta, FL), and a lithium-ion (Li-Ion) rechargeable battery pack (Hisgadget, Inc., Union City, CA); the wiring schematic (Fritzing UG, Berlin, Germany) is depicted in Fig. 1C. While we have provided the suppliers we used, compatible components can also be sourced from alternative suppliers. The Arduino Pro, equipped with an ATmega328 microcontroller IC chip, relays outputs to both the stepper motor, to control pellet dispensing, and the data-logging shield, to control data collection. The 5V DC stepper motor, driven by a motor shield made for the Arduino platform, rotates clockwise 45° then counterclockwise 20° to release individual pellets; the counterclockwise motion is designed to ensure dispensed pellets do not jam prior to dispensing. Detection of a pellet is achieved via an infrared photo interrupter, which has two output states: “HIGH” (&gt;4.9 V), when the beam path is unobstructed (i.e., food well is empty); and “LOW” (&lt;0.4V), when the beam path is obstructed (i.e., food well contains a pellet). Power to the Arduino board is supplied via a 6600 mAh Li-ion rechargeable battery pack (69 × 54 × 18 mm). A PowerBoost 500 Charger links the battery to the Arduino and boosts the voltage from the Li-ion battery to 5.2V, while simultaneously providing a port for recharging the battery. Runtime can be manipulated using different batteries, and indefinite runtime can be achieved with a 5V DC power supply via a micro-USB connection.

2.3 Software
The program controlling the activity of FED is written in Arduino IDE Software (Version 1.6.5; Arduino, Somerville, MA) and, following upload to the Arduino Pro, is automatically initiated upon powering on FED. In addition to the unique sketch controlling the activity of FED, additional libraries are utilized: an SD library (SdFat Library, William Greiman), used in conjunction with the data logging shield to initiate the program, log data, and open data; a real-time clock (RTC) library (RTClib, Adafruit), built into the SD shield to allow precise timestamps throughout an experiment; and a motor shield library (Adafruit_MotorShield, Adafruit), to control speed, power, and rotation of the bidirectional stepper motor. All libraries are open-source and available for download here: https://github.com/KravitzLab/fed. Each time FED is powered on, a unique CSV file is created and named as designated by the user (e.g., FED_MouseX.csv). Throughout a given experiment, the CSV file is continuously updated following each pellet event, and final CSV files include the timestamp and cumulative count of each pellet removal. FED also takes advantage of sleep capabilities on Arduino boards to reduce power consumption and extend battery life: when idle, the board cuts off power and monitoring to all components with the exception of the digital input attached to the photo interrupter board for pellet monitoring.

2.4 Validation testing
Reliability of pellet dispensing was tested by manual removal of 100 pellets from the food well three separate times. In these tests, dispensing was considered to be either successful (i.e., the removed pellet was appropriately replaced) or unsuccessful (i.e., replacement pellets either bounced out of the food well or the FED system failed to register the dispensing event, resulting in dispensing of an additional pellet). Battery life of ~7 days was calculated based on the measured current draw of the device and empirically confirmed.

2.5 Behavioral tests
All procedures involving the use of animals were reviewed and approved by the National Institute of Diabetes and Digestive and Kidney Disease’s Animal Care and Use Community.

2.5.1 Multi-day feeding behavior
FED was validated in a 72 hr feeding experiment using adult, male C57BL/6 mice (n = 8). Mice were individually housed in colony cages (NexGen, Allentown, Inc.) containing FED devices and water bottles, and were allowed ad libitum consumption of 20 mg grain pellets (5TUM, 3.30 kcal/g; TestDiet, St. Louis, MO) from FED (Fig. 2A). Food intake was also measured manually over the same time period in male littermates of experimental animals (n = 8) with standard lab chow (3.0 kcal/g) to offer a direct comparison of food intake between FED and the most common alternative method. Food intake data was further separated into light- and dark-cycle feeding to further describe feeding behavior, and the following parameters were examined: 1) meals per cycle, 2) meal duration, 3) meal size, 4) inter-meal interval, 5) eating rate (pellets/hr), and 6) satiety ratio (inter-meal interval/meal size).

2.5.2 Optogenetically-evoked feeding
Adult male mice (n = 3), heterozygous for Cre recombinase under the AgRP locus (AgRP-IRES-Cre), were individually housed under a 12/12 hr light/dark cycle (lights off at 15:00) with ad libitum access to food and water. At 6 weeks of age, mice underwent stereotaxic surgery to receive infusion of channelrhodopsin (AAV10-CAG-Flex-ChR2-tdTomato, 300 nl) and implantation of an optic fiber unilaterally over the arcuate nucleus of the hypothalamus (ARC; AP −1.4 mm, ML +0.28 mm, DV −5.75 mm per Bregma; Fig. 4A). After recovery from surgery, mice were given overnight acclimation with individual FEDs in behavioral chambers (30 × 30 cm; Noldus Information Technology, NED), with ad libitum access to 45 mg bacon-flavored pellets (5TUL, 3.44 kcal/g; TestDiet, St. Louis, MO). The next day, beginning at 08:00, mice received photostimulation of AgRP neurons (20 Hz, pulsed via laser) in an ON-OFF-ON paradigm (60 min/phase) with ad libitum access to 45 mg bacon tablets via FED. Following testing, mice were anesthetized via CO2 inhalation and rapidly decapitated. Brains were removed, fixed overnight in neutral-buffered formalin, and post-fixed in 30% sucrose in phosphate-buffered saline. Coronal sections (40 μm) were cut via microtome, and fiber placement was verified histologically (Fig. 4B).

2.6 Statistical analysis
Offline analysis of data was done using MATLAB (Version 2015A; MathWorks, Natick, MA) and NeuroExplorer (Version 4.125; Nex Technologies, Madison, AL). Manual and behavioral validation measures were analyzed in MATLAB using paired t-tests or one-way analyses of variance (ANOVA) followed by Tukey’s post-hoc analyses as indicated. Data are expressed throughout as mean ± SEM.

3. Results
3.1 Validation testing
Successful dispensing of a pellet occurred in ~95% of manually validated trials. Errors included pellets bouncing out of the well (1.0 ± 0.9%) and the infrared beam failing to recognize a pellet, resulting in dispensing of an additional pellet (4.3 ± 2.0%). Measured power consumption in the brief active state (i.e., dispensing a pellet and logging data) was between 60–90 mA, and dropped to 5–10 mA when the system entered its passive sleep. Calculated runtime based on these measured values is ~7 days on the chosen battery pack, which was confirmed empirically.

3.2 Multi-day feeding behavior
Daily food intake measurements were recorded both manually (n = 8) and with the FED system (n = 8) in male C57BL/6 mice. There was no significant difference in manual (9.82 ± 0.47 kcal) and FED (9.55 ± 0.54 kcal) measurements of daily food intake (t (14) = 0.373, p = 0.715; Fig. 2B). However, the high-resolution data provided by FED revealed significantly greater food intake during the dark (8.68 ± 0.74 kcal) versus the light (4.43 ± 0.44 kcal) cycle of each day (t (7) = 5.73, p &lt; 0.001; Fig. 2C). In addition to cumulative food intake, FED’s high temporal resolution allowed visual depiction of circadian feeding rhythms of both individual animals (Fig. 2D, top panel) and full cohorts (Fig. 2D, bottom panel). Moreover, the post-hoc ability to define various feeding parameters allowed highly-detailed analysis of feeding behavior; here, “meal” was defined as consumption of ≥ 0.3 g separated by other feeding bouts by ≥ 15 min, as described previously (Farley et al., 2003) (Fig. 3A, 3B). Using this approach, significant circadian differences were revealed in meal duration (dark: 3.28 ± 0.48 hr, light: 1.08 ± 0.19 hr; t (7) = 4.47, p = 0.003; Fig. 3C), meal size (dark: 39.50 ± 4.26 pellets, light: 18.65 ± 1.46 pellets; t (7) = 4.36, p = 0.003; Fig. 3D), eating rate (dark: 7.62 ± 0.57 pellets/hr, light: 4.27 ± 0.44 pellets/hr; t (7) = 4.05, p = 0.005; Fig. 3E), and percent of pellets eaten within meals (dark: 87.87 ± 2.54, light: 59.08 ± 8.19; t (7) = 2.88, p = 0.024; Fig. 3F), but no differences were observed in number of meals (dark: 6.38 ± 0.60, light: 5.13 ± 0.92; t (7) = 0.97, p = 0.366; Fig. 3G) or satiety ratio (dark: 0.22 ± 0.04, light: 0.81 ± 0.40; t (7) = 1.47, p = 0.186; Fig. 3H). This indicates that many dimensions of feeding behavior, other than total food intake, differ between the light and dark cycle.

3.3 Optogenetically-evoked feeding
Photostimulation of AgRPARC neurons (Aponte et al, 2011) significantly increased food intake (F (2,4) = 10.98, p &lt; 0.05; Fig. 4C). Food intake was greatest during the first stimulation period (Stim-1; 28.3 ± 7.6 pellets, 1.3 ± 0.3 g), dropped when stimulation was removed, (No-stim; 0.3 ± 0.3 pellets, 0.02 ± 0.02 g), and rebounded again during the second stimulation period (Stim-2; 10.3 ± 0.9 pellets, 0.50 ± 0.04 g; Fig. 4D).

4. Discussion
The Feeding Experimentation Device (FED) is a home cage feeding system based on the Arduino microcontroller system. FED uses off-the-shelf, easily accessible components that can be assembled with little knowledge or experience with circuits and engineering. FED is capable of operating for 7 days on a single charge of its rechargeable 6600 mAh Li-Ion battery, allowing for long-term assaying of feeding behavior with low human interference.

FED employs custom-designed, but freely-available, Arduino sketches, allowing users to define specific variables in the context of individual experiments. Using time-stamped incidents of pellet retrieval, users can align data to light-cycle and dark-cycle feeding to explore circadian feeding effects. The ability to define and analyze specific feeding parameters (e.g., bouts, meals, inter-meal intervals), paired with high temporal resolution, enables users to obtain precise details of feeding behavior that are not possible with manual food weighing. FED’s usage of 20 and 45 mg food pellets also offers versatility for the type of food that can be implemented in behavioral studies, and the high-temporal resolution provides access to detailed feeding parameters. Additionally, FED’s hardware is 3D designed and full-editable through a free website (www.tinkercad.com), allowing users to modify the dimensions of the outer housing to fit their vivarium’s animal cages.

During manual validation, we occasionally detected errors (&lt;5% of total dispensing) that resulted in dispensing of two pellets instead of one, due to either the first pellet bouncing out of the well or the infrared beam failing to recognize the first pellet. Importantly, both still provided the animal with a food source, rather than resulting in food deprivation. It is also possible that a mouse might engage in “hoarding”, and remove pellets from FED without consuming them. Though theoretically possible, we have not encountered hoarding behavior in our tests, as mice appear to eat the pellets as they retrieve them from FED. Quantitative evidence of this came from our daily food intake measures recorded using FED (8.5 – 12 kcal/day), which are comparable to food intake measures when recorded manually (8.5 – 12 kcal/day), and also comparable to Research Diet’s BioDAQ system (9 – 15 kcal/day; www.researchdiets.com/resource-center-page/typical-food-intake) and Sable Systems Promethion system (10 – 15 kcal/day; personal communication per Miriam Bocarsly). This indicates that hoarding behavior is not a concern with FED, as hoarding would result in higher food intake measurements compared to other systems. Although no system is without faults, we believe FED has an acceptably low error rate for most research applications.

We see four unique benefits of using FED for feeding research: 1) FED is low-cost (~$350 including 3D printing costs, which is &gt;10x cheaper than commercial units), making high throughput experiments feasible. Moreover, the cost makes FED accessible to laboratories and classroom settings that cannot afford commercial feeding equipment. 2) FED is completely self-contained and fits within colony caging, allowing for true measures of “home cage” feeding. It can also be easily integrated with other scientific equipment, as it does not require an external computer or wired connection to run. 3) FED’s high temporal resolution and adaptability allows synchronization with other methods, such as in vivo electrophysiology and optogenetics. 4) All design files and code for FED are open-source, and can be modified and improved upon by members of the research community.

Future improvements to FED could include employing an internet-based data server to allow for immediate visualization of feeding behavior from off-site locations, integrating nose-pokes into FED’s design to allow for dispensing of pellets under operant control, and incorporating radio-frequency identification (RFID) sensing to allow measurement of food intake from group housed animals. Such upgrades will further heighten the usefulness of FED as a unique tool for monitoring feeding behavior, and will demonstrate the power of open-source, affordable tools for behavioral research (Devarakonda et al., 2015; Hoffman, Song, &amp; Tuttle, 2007).

Supplementary Material
1 Video 1
Sample clips depicting a FED unit in a home cage with a mouse. Video segments were chosen to emphasize the mouse’s interaction with FED, along with the normal behavior of the mouse with FED in his home cage. Pellet retrievals are indicated with yellow text.

 2  Research was funded by the National Institutes of Health Intramural Research Program. We would like to thank the NIH Section on Instrumentation and the NIH Library for their generous assistance with 3D printing, Dr. Michael Krashes and Dr. Chia Li for their donation of AgRP-IRES-Cre mice, and Dr. Miriam Bocarsly for food intake measurements via Sable’s Promethion System.

This is a PDF file of an unedited manuscript that has been accepted for publication. As a service to our customers we are providing this early version of the manuscript. The manuscript will undergo copyediting, typesetting, and review of the resulting proof before it is published in its final citable form. Please note that during the production process errors may be discovered which could affect the content, and all legal disclaimers that apply to the journal pertain.

Fig. 1 (A) 3D printed housing and hardware. Exploded view of hardware assembly and main components used to hold pellets, individually dispense pellets, and mount the stepper motor. (B) FED electronics. Six main electronic components are used to operate FED: an Arduino microcontroller, data logging shield, Adafruit motor shield, stepper motor, photo interrupter board, and Li-ion battery pack. (C) Electronic configuration. Circuitry wiring of each component to the Arduino microcontroller, highlighting the stacking shields of the Arduino that minimizes the number of additional wires and connections needed.

Fig. 2 (A) Representative image of FED in a home cage. Mice were housed in home cages equipped with a single FED system per cage. (B) Daily food intake measured via FED vs manual methods. Daily food intake measurements from FED are comparable to those obtained through manual weighing of chow (p &gt; 0.05). (C) Circadian food intake measured via FED. Food intake is significantly greater during the dark cycle versus the light cycle (D) Pellet retrievals occur primarily, but not exclusively, during the dark cycle. Top panel: individual spikes indicate single pellet retrieval events by individual mice (illustrated by different colors). Bottom panel: average pellet retrieval over 72 hr in 30 min bins. Shading depicts the dark cycle (lights on at 06:00). n = 8/group. ***p &lt; 0.001.

Fig. 3 (A) Representative dark cycle food intake measured via FED. Individual spikes indicate single pellet retrievals, and horizontal bars indicate meals defined as consumption of ≥0.3 g separated by other feeding bouts by ≥15 min; dark cycle: 18:00–06:00). (B) Representative light cycle food intake measured via FED. Individual spikes indicate single pellet retrievals, and horizontal bars indicate meals (light cycle: 06:00–18:00). (C-H) Individual feeding parameters were analyzed for circadian effects. Meal duration, meal size, eating rate, and the proportion of pellets consumed as part of a meal were significantly greater during the dark cycle compared to the light cycle, while no difference was found in number of meals or satiety ratio. n = 8. *p &lt; 0.05 **p &lt; 0.01.

Fig. 4 (A) Schematic illustrating viral construct and fiber placement in the ARC. To artificially evoke feeding, AgRP-IRES-Cre mice received infusion of AAV10-ChR2-tdTomato and implantation of an optic fiber above the ARC (shown in red). (B) Representative confocal micrograph illustrating selective ChR2-tdTomato infection of AgRP neurons. Images taken at 20x; scale bar = 100 μm. (C) Optogenetic stimulation of AgRPARC neurons induces pellet retrieval. Individual spikes indicate single pellet retrieval events by individual mice (illustrated by different colors). Photostimulation is indicated by blue shading. (D) Average pellets retrieved during each phase of the experiment. Stimulation of AgRPARC neurons significantly increased pellet retrieval during the Stim-1 period compared to the No-stim period. n = 3. *p &lt; 0.05.

Table 1 List of commercially available systems for measuring food intake in rodents.

Company	System	Special equipment for data monitoring?	Compatible with standard colony rack?	
N/A	FED	No	Yes	
Bioseb1	OXYLET	Yes	No	
Columbus Instruments2	Oxymax- CLAMS-HC	Yes	No	
Research Diets3	BioDAQ	Yes	No	
Sable Systems4	Promethion	Yes	No	
TSE Systems5	PhenoMaster	No	No	
1 
            http://www.bioseb.com/bioseb/anglais/default/index.php
          

2 
            http://www.colinst.com
          

3 
            http://www.researchdiets.com/biodaq
          

4 
            http://www.sablesys.com
          

5 http://www.tse-systems.com/.

HIGHLIGHTS
Available methods for measuring food intake are either labor-intensive and temporally-imprecise or expensive and require specialized caging and equipment.

We developed the Feeding Experimentation Device (FED), which automatically quantifies feeding with high accuracy, precision, and temporal resolution.

FED is adaptable, open-source and battery powered, allowing it to be used in many settings including within traditional caging on a vivarium rack.


   
            Aponte Y  
            Atasoy D  
            Sternson SM  
           AGRP neurons are sufficient to orchestrate feeding behavior rapidly and without training Nature Neuroscience 2011 14 3 351 355 10.1038/nn.2739 21209617 

            Devarakonda K  
            Nguyen KP  
            Kravitz AV  
           ROBucket: A low cost operant chamber based on the Arduino microcontroller Behavior Research Methods 2015 1 7 10.3758/s13428-015-0603-2 24683129 

            Ellacott KLJ  
            Morton GJ  
            Woods SC  
            Tso P  
            Schwartz MW  
           Assessment of feeding behavior in laboratory mice Cell Metabolism 2010 12 1 10 17 10.1016/j.cmet.2010.06.001 20620991 

            Farley C  
            Cook JA  
            Spar BD  
            Austin TM  
            Kowalski TJ  
           Meal pattern analysis of diet-induced obesity in susceptible and resistant rats Obesity Research 2003 11 7 845 851 10.1038/oby.2003.116 12855753 

            Hoffman AM  
            Song J  
            Tuttle EM  
           ELOPTA: A novel microcontroller-based operant device Behavior Research Methods 2007 39 4 776 782 18183890 

            Ulman EA  
            Compton D  
            Kochanek J  
           Measuring food and water intake in rats and mice ALN Magazine 2008 17 20 

